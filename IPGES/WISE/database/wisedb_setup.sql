CREATE DATABASE wisedb;
USE wisedb;
CREATE USER 'wise'@'localhost' IDENTIFIED BY 'wisepassword';
GRANT ALL PRIVILEGES ON wisedb.* TO 'wise'@'localhost';
FLUSH PRIVILEGES;

-- Create Tables

CREATE TABLE zones (id INT NOT NULL, label VARCHAR(15), label_loc CHAR(1), rgb_id MEDIUMINT, checked TINYINT, gpio_pin TINYINT, relay TINYINT, PRIMARY KEY(id));

CREATE TABLE contactors (id INT NOT NULL, zone_id INT, rgb_id MEDIUMINT, PRIMARY KEY(id));

CREATE TABLE pom (id TINYINT NOT NULL, name VARCHAR(25),  active TINYINT, message_size MEDIUMINT, 
               decoder_a0 TINYINT, decoder_a1 TINYINT, decoder_a2 TINYINT, decoder_a3 TINYINT, PRIMARY KEY(id));

CREATE TABLE pom_data (id INT NOT NULL AUTO_INCREMENT, pom_id TINYINT, insert_date DATETIME, insert_date_micro MEDIUMINT, PRIMARY KEY(id));

CREATE TABLE pom_data_samples (id INT NOT NULL AUTO_INCREMENT, pom_data_id INT, 
			   sample_type VARCHAR(10), phase CHAR(1), rms SMALLINT, min SMALLINT, max SMALLINT,
			   0_harm SMALLINT, 1_harm SMALLINT, 2_harm SMALLINT, 3_harm SMALLINT, 4_harm SMALLINT, 
               5_harm SMALLINT, 6_harm SMALLINT, 7_harm SMALLINT, 8_harm SMALLINT, 9_harm SMALLINT,     
               10_harm SMALLINT, 11_harm SMALLINT, 12_harm SMALLINT, 13_harm SMALLINT,
			   s1	SMALLINT, s2	SMALLINT, s3	SMALLINT, s4	SMALLINT, 
			   s5	SMALLINT, s6	SMALLINT, s7	SMALLINT, s8	SMALLINT,  
			   s9	SMALLINT, s10	SMALLINT, s11	SMALLINT, s12	SMALLINT,  
	    	   s13	SMALLINT, s14	SMALLINT, s15	SMALLINT, s16	SMALLINT, 
			   s17	SMALLINT, s18	SMALLINT, s19	SMALLINT, s20	SMALLINT, 
	 		   s21	SMALLINT, s22	SMALLINT, s23	SMALLINT, s24	SMALLINT, 
			   s25	SMALLINT, s26	SMALLINT, s27	SMALLINT, s28	SMALLINT, 
			   s29	SMALLINT, s30	SMALLINT, s31	SMALLINT, s32	SMALLINT, 
			   s33	SMALLINT, s34	SMALLINT, s35	SMALLINT, s36	SMALLINT, 
			   s37	SMALLINT, s38	SMALLINT, s39	SMALLINT, s40	SMALLINT, 
			   s41	SMALLINT, s42	SMALLINT, s43	SMALLINT, s44	SMALLINT, 
			   s45	SMALLINT, s46	SMALLINT, s47	SMALLINT, s48	SMALLINT, 
			   s49	SMALLINT, s50	SMALLINT, s51	SMALLINT, s52	SMALLINT, 
			   s53	SMALLINT, s54	SMALLINT, s55	SMALLINT, s56	SMALLINT, 
			   s57	SMALLINT, s58	SMALLINT, s59	SMALLINT, s60	SMALLINT, 
			   s61	SMALLINT, s62	SMALLINT, s63	SMALLINT, s64	SMALLINT, 
			   s65	SMALLINT, s66	SMALLINT, s67	SMALLINT, s68	SMALLINT, 
			   s69	SMALLINT, s70	SMALLINT, s71	SMALLINT, s72	SMALLINT, 
			   s73	SMALLINT, s74	SMALLINT, s75	SMALLINT, s76	SMALLINT, 
			   s77	SMALLINT, s78	SMALLINT, s79	SMALLINT, s80	SMALLINT, 
			   s81	SMALLINT, s82	SMALLINT, s83	SMALLINT, s84	SMALLINT, 
			   s85	SMALLINT, s86	SMALLINT, s87	SMALLINT, s88	SMALLINT, 
			   s89	SMALLINT, s90	SMALLINT, s91	SMALLINT, s92	SMALLINT, 
			   s93	SMALLINT, s94	SMALLINT, s95	SMALLINT, s96	SMALLINT, 
			   s97	SMALLINT, s98	SMALLINT, s99	SMALLINT, s100	SMALLINT, 
			   s101	SMALLINT, s102	SMALLINT, s103	SMALLINT, s104	SMALLINT, 
			   s105	SMALLINT, s106	SMALLINT, s107	SMALLINT, s108	SMALLINT, 
			   s109	SMALLINT, s110	SMALLINT, s111	SMALLINT, s112	SMALLINT, 
			   s113	SMALLINT, s114	SMALLINT, s115	SMALLINT, s116	SMALLINT, 
			   s117	SMALLINT, s118	SMALLINT, s119	SMALLINT, s120	SMALLINT, 
			   s121	SMALLINT, s122	SMALLINT, s123	SMALLINT, s124	SMALLINT, 
			   s125	SMALLINT, s126	SMALLINT, s127	SMALLINT, s128	SMALLINT, PRIMARY KEY(id));


-- Populate Data into Point of Measurement Table
INSERT INTO pom VALUES (1, 'VT-1', 1, 768, 1, 0, 0, 0); 
INSERT INTO pom VALUES (2, 'VT-2', 1, 768, 0, 1, 0, 0); 
INSERT INTO pom VALUES (3, 'VT-3', 1, 768, 1, 1, 0, 0); 
INSERT INTO pom VALUES (4, 'VT-4', 1, 768, 0, 0, 1, 0); 
INSERT INTO pom VALUES (5, 'VT-5', 1, 768, 1, 0, 1, 0); 
INSERT INTO pom VALUES (6, 'VT-6', 1, 768, 0, 1, 1, 0);
INSERT INTO pom VALUES (7, 'VT-7', 1, 768, 1, 1, 1, 0); 
INSERT INTO pom VALUES (8, 'VT-8', 1, 768, 0, 0, 0, 1); 
INSERT INTO pom VALUES (9, 'VT-9', 1, 768, 1, 0, 0, 1); 

-- Populate Data into Zone & Relay_Contactor Tables
INSERT INTO zones VALUES (1, '1-2', 'n', 255021, 0, 35, 11);
INSERT INTO zones VALUES (2, '3', 's', 255025, 0, 36, 12);
INSERT INTO zones VALUES (3, '4', 'n', 255026, 0, 35, 13);
INSERT INTO zones VALUES (4, '5-6', 'w', 255022, 0, 38, 14);
INSERT INTO zones VALUES (5, '7', 'w', 255027, 0, 37, 15);
INSERT INTO zones VALUES (6, '8', 'e', 255028, 0, 40, 16);
INSERT INTO zones VALUES (7, '9', 's', 255029, 0, 13, 1);
INSERT INTO zones VALUES (8, '10', 'n', 255030, 0, 16, 2);
INSERT INTO zones VALUES (9, '11', 'w', 255031, 0, 15, 3);
INSERT INTO zones VALUES (10, '12-14', 's', 255024, 0, 18, 4);
INSERT INTO zones VALUES (11, '13-15', 'n', 255023, 0, 29, 5);
INSERT INTO zones VALUES (12, '16', 's', 255032, 0, 22, 6);
INSERT INTO zones VALUES (13, '17', 'n', 255033, 0, 31, 7);
INSERT INTO zones VALUES (14, '18', 'e', 255034, 0, 32, 8);

-- Populate Data into Contactor Table
INSERT INTO contactors VALUES (1, 1, 25501);
INSERT INTO contactors VALUES (2, 1, 25502);
INSERT INTO contactors VALUES (3, 2, 25503);
INSERT INTO contactors VALUES (4, 3, 25504);
INSERT INTO contactors VALUES (5, 4, 25505);
INSERT INTO contactors VALUES (6, 4, 25506);
INSERT INTO contactors VALUES (7, 5, 25507);
INSERT INTO contactors VALUES (8, 6, 25508);
INSERT INTO contactors VALUES (9, 7, 25509);
INSERT INTO contactors VALUES (10, 8, 255010);
INSERT INTO contactors VALUES (11, 9, 255011);
INSERT INTO contactors VALUES (12, 10, 255012);
INSERT INTO contactors VALUES (13, 11, 255013);
INSERT INTO contactors VALUES (14, 10, 255014);
INSERT INTO contactors VALUES (15, 11, 255015);
INSERT INTO contactors VALUES (16, 12, 255016);
INSERT INTO contactors VALUES (17, 13, 255017);
INSERT INTO contactors VALUES (18, 14, 255018);

